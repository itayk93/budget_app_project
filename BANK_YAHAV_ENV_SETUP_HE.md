# הגדרת פרטי כניסה לבנק יהב ב-ENV

## סקירה כללית
מערכת כריית הנתונים הבנקיים מאפשרת כעת אחסון מאובטח של פרטי הכניסה לבנק יהב במשתני סביבה (ENV), במקום להצפין ולשמור אותם במסד הנתונים.

## יתרונות של שיטת ה-ENV:
- **אבטחה מוגברת**: פרטי הכניסה נשמרים במשתני הסביבה של השרת ולא במסד הנתונים
- **הגדרה פשוטה**: אין צורך לערוך ולנהל פרטי כניסה דרך הממשק
- **בקרה מוגברת**: אתה שולט במקום שבו נשמרים פרטי הכניסה

## הוראות הגדרה:

### שלב 1: עריכת קובץ .env
פתח את הקובץ `.env` בתיקיית הפרויקט ועדכן את השורות הבאות:

```env
YAHAV_BANK_USERNAME=your_actual_yahav_username
YAHAV_BANK_PASSWORD=your_actual_yahav_password  
YAHAV_BANK_NATIONAL_ID=your_actual_national_id
```

**החלף את הערכים הבאים:**
- `your_actual_yahav_username` - שם המשתמש שלך בבנק יהב
- `your_actual_yahav_password` - הסיסמה שלך בבנק יהב
- `your_actual_national_id` - מספר תעודת הזהות שלך

### שלב 2: וידוא ההגדרות
וודא שהשורות הבאות קיימות ומוגדרות נכון:

```env
BANK_ENV_CREDENTIALS_ENABLED=true
BANK_ENV_ALLOWED_BANKS=yahav
```

## איך זה עובד:

1. **זיהוי קונפיגורציה**: כאשר אתה יוצר קונפיגורציה לבנק יהב, המערכת בודקת אם ENV מופעל
2. **שימוש אוטומטי**: אם ENV מופעל עבור יהב, המערכת תשתמש בפרטים מה-ENV במקום מהמסד נתונים
3. **חזרה לברירת מחדל**: אם לא מוגדר ENV, המערכת תשתמש בפרטים המוצפנים הרגילים

## בטיחות:

⚠️ **חשוב מאוד:**
- אל תשתף את קובץ ה-`.env` עם אף אחד
- אל תעלה את קובץ ה-`.env` ל-Git או לאף מקום ציבורי
- שמור על פרטי הכניסה מעודכנים
- אם אתה משנה סיסמה בבנק, עדכן גם בקובץ ה-`.env`

## בעיות נפוצות:

### שגיאת "Missing ENV credentials"
אם אתה מקבל שגיאה זו, בדוק ש:
- פרטי הכניסה מולאו נכון בקובץ `.env`
- אין רווחים נוספים בתחילת או בסוף הערכים
- השרת אותחל לאחר שינוי ה-`.env`

### שגיאת כניסה לבנק
אם הכניסה לבנק נכשלת:
- וודא שפרטי הכניסה נכונים
- בדוק שלא שינית סיסמה לאחרונה
- נסה להתחבר לבנק דרך הדפדפן כדי לוודא שהחשבון לא חסום

## הרצה:
לאחר עריכת הקובץ `.env`, הפעל מחדש את השרת:

```bash
npm restart
```

או עצור והפעל שוב:

```bash
# עצור את השרת (Ctrl+C)
npm start
```

## בדיקת התקנה:
כשתנסה להריץ כריית נתונים עבור בנק יהב, המערכת תדפיס בלוג:
```
🌍 Using ENV credentials for yahav
✅ Successfully loaded ENV credentials for yahav with fields: username, password, nationalID
```

אם אתה רואה הודעות אלה, ההגדרה הצליחה!