<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bank Scraper Integration Test</title>
</head>
<body>
    <h1>בדיקת אינטגרציית Bank Scraper</h1>
    
    <button onclick="testBankScraperIntegration()">🧪 דמה נתוני Bank Scraper ועבור לעמוד Upload</button>
    
    <script>
        function testBankScraperIntegration() {
            // Create mock bank scraper data similar to what the real integration creates
            const mockBankScraperData = {
                transactions: [
                    {
                        user_id: "test-user-id",
                        business_name: "רמי לוי/סניף ירושלים",
                        payment_date: "2025-08-13",
                        amount: "250.50",
                        currency: "ILS",
                        payment_method: "1234567890",
                        payment_identifier: "TEST123",
                        category_id: null,
                        payment_month: 8,
                        payment_year: 2025,
                        flow_month: "2025-08",
                        charge_date: "2025-08-13",
                        notes: "",
                        excluded_from_flow: false,
                        source_type: "bank_scraper",
                        original_amount: "250.50",
                        transaction_hash: "test-hash-1",
                        is_transfer: false,
                        linked_transaction_id: null,
                        payment_number: 1,
                        total_payments: 1,
                        original_currency: "ILS",
                        exchange_rate: null,
                        exchange_date: null,
                        business_country: null,
                        quantity: null,
                        source_category: null,
                        transaction_type: "normal",
                        execution_method: null,
                        file_source: "bank_scraper",
                        recipient_name: null,
                        duplicate_parent_id: null,
                        bank_scraper_source_id: 123
                    },
                    {
                        user_id: "test-user-id",
                        business_name: "תן ביס/פיצה נחלת בנימין",
                        payment_date: "2025-08-12",
                        amount: "65.00",
                        currency: "ILS",
                        payment_method: "1234567890",
                        payment_identifier: "TEST124",
                        category_id: null,
                        payment_month: 8,
                        payment_year: 2025,
                        flow_month: "2025-08",
                        charge_date: "2025-08-12",
                        notes: "",
                        excluded_from_flow: false,
                        source_type: "bank_scraper",
                        original_amount: "65.00",
                        transaction_hash: "test-hash-2",
                        is_transfer: false,
                        linked_transaction_id: null,
                        payment_number: 1,
                        total_payments: 1,
                        original_currency: "ILS",
                        exchange_rate: null,
                        exchange_date: null,
                        business_country: null,
                        quantity: null,
                        source_category: null,
                        transaction_type: "normal",
                        execution_method: null,
                        file_source: "bank_scraper",
                        recipient_name: null,
                        duplicate_parent_id: null,
                        bank_scraper_source_id: 124
                    },
                    {
                        user_id: "test-user-id",
                        business_name: "מקדונלדס/רמת גן",
                        payment_date: "2025-08-11",
                        amount: "45.00",
                        currency: "ILS",
                        payment_method: "1234567890",
                        payment_identifier: "TEST125",
                        category_id: null,
                        payment_month: 8,
                        payment_year: 2025,
                        flow_month: "2025-08",
                        charge_date: "2025-08-11",
                        notes: "",
                        excluded_from_flow: false,
                        source_type: "bank_scraper",
                        original_amount: "45.00",
                        transaction_hash: "test-hash-3",
                        is_transfer: false,
                        linked_transaction_id: null,
                        payment_number: 1,
                        total_payments: 1,
                        original_currency: "ILS",
                        exchange_rate: null,
                        exchange_date: null,
                        business_country: null,
                        quantity: null,
                        source_category: null,
                        transaction_type: "normal",
                        execution_method: null,
                        file_source: "bank_scraper",
                        recipient_name: null,
                        duplicate_parent_id: null,
                        bank_scraper_source_id: 125
                    }
                ],
                source: "bank_scraper",
                configName: "יהב - חשבון ראשי",
                accountNumber: "1234567890",
                count: 3
            };
            
            // Store the data in sessionStorage
            sessionStorage.setItem('bankScraperTransactions', JSON.stringify(mockBankScraperData));
            
            // Navigate to the upload page
            window.location.href = 'http://localhost:4000/upload';
        }
    </script>
</body>
</html>